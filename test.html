<a href="test.php">Download my Text File</a><br>

<script type="script/javascript">

window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
var fs;

function initFS() {
	console.log("init filesystem")
	window.requestFileSystem(window.TEMPORARY, 1024 * 1024, function (filesystem) {
        fs = filesystem;
        console.log(fs);
	}, errorHandler);
}

function errorHandler(e) {
	var msg = '';
	switch (e.code) {
		...
	};
	console.log('Error: ' + msg);
}

function receiveFile(cont) {
	fs.root.getFile('log.txt', {
					create: true
					}, function (fileEntry) {
					// Create a FileWriter object for our FileEntry (log.txt).
					fileEntry.createWriter(function (fileWriter) {
										   fileWriter.seek(fileWriter.length);
										   fileWriter.onwriteend = function (e) {
										   console.log('Write completed.');
										   };
										   fileWriter.onerror = function (e) {
										   console.log('Write failed: ' + e.toString());
										   };
										   // Create a new Blob and write it to log.txt.
										   var bb = new Blob([cont]);
										   fileWriter.write(bb);
										   }, errorHandler);
					}, errorHandler);
}

function foo() {
	for (i = 0; i < 5; i++) {
		setTimeout(function () { // // it works, BTW: Why it didn't write the num in ascending order as expected
				   (function (x) {
					receiveFile(x);
					})(i)
				   }, i * 1000);
				   //receiveFile(i); // didn't work, just write once
	}
}

window.addEventListener("load", initFS, false);

</script>
<input type="button" onclick="action();" value="Do It!">